"use strict";(globalThis.webpackChunkcg_notes=globalThis.webpackChunkcg_notes||[]).push([[477],{3614:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Lighting","title":"OpenGL Lighting","description":"Complete guide for Section 9 + Lab 3","source":"@site/docs/Lighting.md","sourceDirName":".","slug":"/Lighting","permalink":"/cvg-notes/docs/Lighting","draft":false,"unlisted":false,"editUrl":"https://github.com/tino-ryan/cvg-notes/tree/main/docs/Lighting.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Hierarchical Modelling","permalink":"/cvg-notes/docs/Hierarchical_Modelling"},"next":{"title":"OpenGL Basics","permalink":"/cvg-notes/docs/OpenGL_Basics"}}');var r=l(4848),t=l(8453);const s={},a="OpenGL Lighting",o={},d=[{value:"1. Enable Lighting",id:"1-enable-lighting",level:2},{value:"2. Light Types &amp; Properties",id:"2-light-types--properties",level:2},{value:"2.1 Light Properties (<code>glLightfv</code>)",id:"21-light-properties-gllightfv",level:3},{value:"2.2 Global Ambient (Scene-wide)",id:"22-global-ambient-scene-wide",level:3},{value:"3. Material Properties",id:"3-material-properties",level:2},{value:"4. Normals \u2013 Critical for Lighting!",id:"4-normals--critical-for-lighting",level:2},{value:"Auto-Normal for Sphere (Example)",id:"auto-normal-for-sphere-example",level:3},{value:"5. Lighting Equation (OpenGL 1.1)",id:"5-lighting-equation-opengl-11",level:2},{value:"Ambient",id:"ambient",level:3},{value:"Diffuse (Lambert)",id:"diffuse-lambert",level:3},{value:"Specular (Phong)",id:"specular-phong",level:3},{value:"6. Shading Types",id:"6-shading-types",level:2},{value:"7. Complete Lit Cube Example",id:"7-complete-lit-cube-example",level:2},{value:"8. Lab 3 \u2013 WebGL Shaders (Modern OpenGL)",id:"8-lab-3--webgl-shaders-modern-opengl",level:2},{value:"Lab 3.1: Solid Color + Rotation",id:"lab-31-solid-color--rotation",level:3},{value:"Lab 3.2: Lambert + Cell Shading",id:"lab-32-lambert--cell-shading",level:3}];function c(e){const n={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"opengl-lighting",children:"OpenGL Lighting"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Complete guide for Section 9 + Lab 3"}),(0,r.jsx)(n.br,{}),"\n","Includes: Lights, Materials, Normals, Shading, Lighting Equation",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Tips"}),": Always ",(0,r.jsx)(n.code,{children:"glEnable(GL_LIGHTING)"})," and ",(0,r.jsx)(n.code,{children:"GL_LIGHT0"}),". Use ",(0,r.jsx)(n.code,{children:"glNormal3f()"})," before each vertex. Set material ",(0,r.jsx)(n.strong,{children:"once"})," per object. Use ",(0,r.jsx)(n.code,{children:"glLightModel*"})," for global ambient."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-enable-lighting",children:"1. Enable Lighting"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"glEnable(GL_LIGHTING);        // MUST enable\nglEnable(GL_LIGHT0);          // Default white directional light\n\n// Default GL_LIGHT0: White, directional, from viewer, diffuse only\n// Up to 8 lights: GL_LIGHT0 to GL_LIGHT7\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-light-types--properties",children:"2. Light Types & Properties"}),"\n",(0,r.jsxs)(n.h3,{id:"21-light-properties-gllightfv",children:["2.1 Light Properties (",(0,r.jsx)(n.code,{children:"glLightfv"}),")"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"float white[] = {1,1,1,1};\nfloat dim[]   = {0.3,0.3,0.3,1};\nfloat pos[]   = {5,5,5,1};   // Point light at (5,5,5)\nfloat dir[]   = {0,0,-1,0};  // Directional light (w=0)\n\nglLightfv(GL_LIGHT1, GL_AMBIENT,  dim);\nglLightfv(GL_LIGHT1, GL_DIFFUSE,  white);\nglLightfv(GL_LIGHT1, GL_SPECULAR, white);\nglLightfv(GL_LIGHT1, GL_POSITION, pos);\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Meaning"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GL_AMBIENT"})}),(0,r.jsx)(n.td,{children:"Background glow"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GL_DIFFUSE"})}),(0,r.jsx)(n.td,{children:"Main color (Lambert)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GL_SPECULAR"})}),(0,r.jsx)(n.td,{children:"Shiny highlight"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GL_POSITION"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"[x,y,z,w]"})," \u2192 ",(0,r.jsx)(n.code,{children:"w=1"}),": point, ",(0,r.jsx)(n.code,{children:"w=0"}),": directional"]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"22-global-ambient-scene-wide",children:"2.2 Global Ambient (Scene-wide)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"float globalAmb[] = {0.1, 0.1, 0.1, 1};\nglLightModelfv(GL_LIGHT_MODEL_AMBIENT, globalAmb);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-material-properties",children:"3. Material Properties"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"float red[]     = {0.8, 0.0, 0.0, 1.0};\nfloat shiny[]   = {1.0, 1.0, 1.0, 1.0};\nfloat none[]    = {0,0,0,1};\n\nglMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE, red);\nglMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, shiny);\nglMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, 50.0);  // 0\u2013128\nglMaterialfv(GL_FRONT_AND_BACK, GL_EMISSION, none);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GL_AMBIENT_AND_DIFFUSE"}),": Shortcut (usually same)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GL_SHININESS"}),": Higher = smaller, sharper highlight"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GL_EMISSION"}),": Glow (no light cast)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-normals--critical-for-lighting",children:"4. Normals \u2013 Critical for Lighting!"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"glNormal3f(0, 0, 1);  // Front face\nglBegin(GL_QUADS);\n    glVertex3f(-1,-1, 1);\n    glVertex3f( 1,-1, 1);\n    glVertex3f( 1, 1, 1);\n    glVertex3f(-1, 1, 1);\nglEnd();\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Normals per face \u2192 ",(0,r.jsx)(n.strong,{children:"Flat shading"})]}),"\n",(0,r.jsxs)(n.li,{children:["Normals per vertex \u2192 ",(0,r.jsx)(n.strong,{children:"Smooth shading (average at vertex)"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"auto-normal-for-sphere-example",children:"Auto-Normal for Sphere (Example)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"void drawSphere() {\n    for (int i = 0; i <= stacks; i++) {\n        float lat = M_PI * (-0.5 + (float)i / stacks);\n        float sinLat = sin(lat), cosLat = cos(lat);\n        glBegin(GL_QUAD_STRIP);\n        for (int j = 0; j <= slices; j++) {\n            float lng = 2 * M_PI * j / slices;\n            float x = cos(lng) * cosLat;\n            float y = sinLat;\n            float z = sin(lng) * cosLat;\n            glNormal3f(x, y, z);  // Normal = position (unit sphere)\n            glVertex3f(r*x, r*y, r*z);\n        }\n        glEnd();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-lighting-equation-opengl-11",children:"5. Lighting Equation (OpenGL 1.1)"}),"\n",(0,r.jsx)(n.p,{children:"For each light and each vertex:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"I = Ambient + Diffuse + Specular\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ambient",children:"Ambient"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"I_amb = light_ambient \xd7 material_ambient\n"})}),"\n",(0,r.jsx)(n.h3,{id:"diffuse-lambert",children:"Diffuse (Lambert)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"I_diff = light_diffuse \xd7 material_diffuse \xd7 max(0, N\xb7L)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"specular-phong",children:"Specular (Phong)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"R = 2(N\xb7L)N - L\nI_spec = light_specular \xd7 material_specular \xd7 max(0, R\xb7V)^shininess\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Where:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"N"}),": Surface normal (unit)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"L"}),": Light direction (from surface to light)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"V"}),": View direction (from surface to camera)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"R"}),": Reflection vector"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-shading-types",children:"6. Shading Types"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"How"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Flat"}),(0,r.jsxs)(n.td,{children:["One normal per face \u2192 ",(0,r.jsx)(n.code,{children:"GL_FLAT"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Smooth"}),(0,r.jsxs)(n.td,{children:["Normals per vertex \u2192 ",(0,r.jsx)(n.code,{children:"GL_SMOOTH"})," (default)"]})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"glShadeModel(GL_FLAT);   // Faceted\nglShadeModel(GL_SMOOTH); // Default\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-complete-lit-cube-example",children:"7. Complete Lit Cube Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"void display() {\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glLoadIdentity();\n    gluLookAt(3,4,5, 0,0,0, 0,1,0);\n\n    glEnable(GL_LIGHTING);\n    glEnable(GL_LIGHT0);\n\n    // Light\n    float lightPos[] = {5,5,5,1};\n    float white[] = {1,1,1,1};\n    glLightfv(GL_LIGHT0, GL_POSITION, lightPos);\n    glLightfv(GL_LIGHT0, GL_DIFFUSE, white);\n    glLightfv(GL_LIGHT0, GL_SPECULAR, white);\n\n    // Material\n    float red[] = {0.8,0.1,0.1,1};\n    float shiny[] = {1,1,1,1};\n    glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, red);\n    glMaterialfv(GL_FRONT, GL_SPECULAR, shiny);\n    glMaterialf(GL_FRONT, GL_SHININESS, 80);\n\n    drawCube(1.0);  // With normals!\n\n    glutSwapBuffers();\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-lab-3--webgl-shaders-modern-opengl",children:"8. Lab 3 \u2013 WebGL Shaders (Modern OpenGL)"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.strong,{children:"Lab 3.1.html \u2192 Lab 3.2.html \u2192 Lab 3.3.html"})]}),"\n",(0,r.jsx)(n.h3,{id:"lab-31-solid-color--rotation",children:"Lab 3.1: Solid Color + Rotation"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Vertex Shader:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-glsl",children:"attribute vec3 a_position;\nuniform mat4 u_modelview;\nuniform mat4 u_projection;\n\nvoid main() {\n    gl_Position = u_projection * u_modelview * vec4(a_position, 1.0);\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fragment Shader:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-glsl",children:"precision mediump float;\nvoid main() {\n    gl_FragColor = vec4(0.5, 0.7, 1.0, 1.0);  // Solid blue\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"JS Rotation Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"let angle = 0;\nfunction render() {\n    angle += 0.01;\n    mat4.identity(modelview);\n    mat4.translate(modelview, modelview, [0,0,-5]);\n    mat4.rotateY(modelview, modelview, angle);\n\n    gl.uniformMatrix4fv(u_modelview, false, modelview);\n    gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);\n    requestAnimationFrame(render);\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"lab-32-lambert--cell-shading",children:"Lab 3.2: Lambert + Cell Shading"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Vertex Shader:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-glsl",children:"attribute vec3 a_position;\nattribute vec3 a_normal;\nuniform mat4 u_modelview;\nuniform mat4 u_projection;\nuniform mat4 u_normalMatrix;  // inverse transpose\n\nvarying vec3 v_normal;\nvarying vec3 v_lightDir;\n\nvoid main() {\n    vec4 pos = u_modelview * vec4(a_position, 1.0);\n    v_normal = normalize((u_normalMatrix * vec4(a_normal, 0.0)).xyz);\n    v_lightDir = normalize(vec3(5,5,5) - pos.xyz);  // Light pos\n    gl_Position = u_projection * pos;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fragment Shader (Cell Shading):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-glsl",children:"precision mediump float;\nvarying vec3 v_normal;\nvarying vec3 v_lightDir;\n\nvoid main() {\n    float NdotL = max(0.0, dot(v_normal, v_lightDir));\n    \n    // Cell shading: quantize to 4 levels\n    float levels = 4.0;\n    float shade = floor(NdotL * levels) / levels;\n    \n    vec3 color = vec3(0.2, 0.6, 0.8);  // Base\n    gl_FragColor = vec4(color * shade, 1.0);\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>s,x:()=>a});var i=l(6540);const r={},t=i.createContext(r);function s(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);