"use strict";(globalThis.webpackChunkcg_notes=globalThis.webpackChunkcg_notes||[]).push([[501],{1686:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Hierarchical_Modelling","title":"Hierarchical Modelling","description":"Complete guide for Section 6 + Lab 2 coding","source":"@site/docs/Hierarchical_Modelling.md","sourceDirName":".","slug":"/Hierarchical_Modelling","permalink":"/cvg-notes/docs/Hierarchical_Modelling","draft":false,"unlisted":false,"editUrl":"https://github.com/tino-ryan/cvg-notes/tree/main/docs/Hierarchical_Modelling.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Basics","permalink":"/cvg-notes/docs/Basics"},"next":{"title":"OpenGL Lighting","permalink":"/cvg-notes/docs/Lighting"}}');var t=r(4848),i=r(8453);const a={},o="Hierarchical Modelling",l={},c=[{value:"1. Introduction to Hierarchical Modelling",id:"1-introduction-to-hierarchical-modelling",level:2},{value:"2. Subroutine Hierarchy (Section 6.2)",id:"2-subroutine-hierarchy-section-62",level:2},{value:"2.1 Basic Subroutine Example",id:"21-basic-subroutine-example",level:3},{value:"2.2 Creating Hierarchical Structure",id:"22-creating-hierarchical-structure",level:3},{value:"2.3 Applying Transformations",id:"23-applying-transformations",level:3},{value:"2.4 Save and Restore (Importance &amp; How-To)",id:"24-save-and-restore-importance--how-to",level:3},{value:"3. Scene Graphs (Section 6.3)",id:"3-scene-graphs-section-63",level:2},{value:"3.1 SceneGraphNode (Base)",id:"31-scenegraphnode-base",level:3},{value:"3.2 CompoundObject (Group Sub-Objects)",id:"32-compoundobject-group-sub-objects",level:3},{value:"3.3 TransformedObject (Apply Transforms)",id:"33-transformedobject-apply-transforms",level:3},{value:"3.4 Building a Scene (Car Example)",id:"34-building-a-scene-car-example",level:3},{value:"3.5 Traversal &amp; Stack",id:"35-traversal--stack",level:3},{value:"4. Animation (Section 6.4)",id:"4-animation-section-64",level:2},{value:"5. Exam Tips &amp; Techniques",id:"5-exam-tips--techniques",level:2}];function d(e){const n={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"hierarchical-modelling",children:"Hierarchical Modelling"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Complete guide for Section 6 + Lab 2 coding"}),(0,t.jsx)(n.br,{}),"\n","Includes: Subroutines, Scene Graphs, Transformations, Save/Restore, Animation",(0,t.jsx)(n.br,{}),"\n","Tips: Use subroutines for simple hierarchies; scene graphs for reuse/complexity. Always save/restore to isolate transforms. Test incrementally."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"1-introduction-to-hierarchical-modelling",children:"1. Introduction to Hierarchical Modelling"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Break complex objects into simpler parts in a tree structure."})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Benefits"}),": Reuse, easy animation, modular code."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Coding Tip"}),": Start from leaf nodes (basic shapes) and build up to root (full scene)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Example Scene"}),": Windmill (base + rotating blades), Cart (body + wheels)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Common Mistake"}),": Forgetting to isolate transforms \u2013 leads to unwanted propagation (e.g., rotating blades rotate the ground)."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"2-subroutine-hierarchy-section-62",children:"2. Subroutine Hierarchy (Section 6.2)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Build with functions \u2013 each draws a part, calls sub-parts."})}),"\n",(0,t.jsx)(n.h3,{id:"21-basic-subroutine-example",children:"2.1 Basic Subroutine Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function drawRectangle(g, x, y, width, height, color) {\n    g.fillStyle = color;\n    g.fillRect(x, y, width, height);\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Tip: Parameters for flexibility (position, size, color).",(0,t.jsx)(n.br,{}),"\n","Technique: Define basics first (rect, circle, triangle)."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"22-creating-hierarchical-structure",children:"2.2 Creating Hierarchical Structure"}),"\n",(0,t.jsx)(n.p,{children:"Parent calls children."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function drawHouseBase(g, x, y, width, height) {\n    drawRectangle(g, x, y, width, height, 'brown');  // Walls\n    drawRectangle(g, x + width/3, y + height/2, width/3, height/2, 'black');  // Door\n}\n\nfunction drawRoof(g, x, y, width, height) {\n    g.fillStyle = 'red';\n    g.beginPath();\n    g.moveTo(x, y);\n    g.lineTo(x + width / 2, y - height);\n    g.lineTo(x + width, y);\n    g.closePath();\n    g.fill();\n}\n\nfunction drawHouse(g, x, y, width, height) {\n    drawHouseBase(g, x, y, width, height * 0.75);\n    drawRoof(g, x, y, width, height * 0.25);\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Tip: Use relative coords (0,0 center) for easy transforms.",(0,t.jsx)(n.br,{}),"\n","Technique: Test each function alone in draw()."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"23-applying-transformations",children:"2.3 Applying Transformations"}),"\n",(0,t.jsx)(n.p,{children:"Modify coordinate system for positioning."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function drawHouse(g, x, y, width, height, angle) {\n    g.save();\n    g.translate(x, y);       // Position\n    g.rotate(angle);         // Orientation\n    g.scale(width/100, height/100);  // Assume base size 100\n    drawHouseBase(g, -50, -50, 100, 75);  // Centered at 0,0\n    drawRoof(g, -50, -50, 100, 25);\n    g.restore();\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Order: Scale \u2192 Rotate \u2192 Translate (fixed in Canvas).",(0,t.jsx)(n.br,{}),"\n","Tip: Use ",(0,t.jsx)(n.code,{children:"g.transform(1, shearY, shearX, 1, 0, 0)"})," for skew."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"24-save-and-restore-importance--how-to",children:"2.4 Save and Restore (Importance & How-To)"}),"\n",(0,t.jsx)(n.p,{children:"Isolate transforms to prevent leakage."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Importance:"})," Without it, child transforms affect siblings/parents (e.g., wheel rotation rotates cart body).",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"How-To:"})," ",(0,t.jsx)(n.code,{children:"save()"})," before transforms, ",(0,t.jsx)(n.code,{children:"restore()"})," after drawing sub-object.",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Stack Behavior:"})," Push (save) / Pop (restore) \u2013 match every save with restore."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example (Nested):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function drawWindmill(g) {\n    g.save();                // Save for base\n    g.translate(0, 2);       // Position base\n    drawBase(g);\n    g.restore();\n\n    g.save();                // Save for blades\n    g.translate(0, 2);       // Position top\n    g.rotate(frameNumber * 0.1);  // Animate blades\n    drawBlades(g);\n    g.restore();\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Tip: If bugs, log transform state or draw debug axes.",(0,t.jsx)(n.br,{}),"\n","Technique: For animation, update inside subroutine (e.g., rotate based on frameNumber)."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"3-scene-graphs-section-63",children:"3. Scene Graphs (Section 6.3)"}),"\n",(0,t.jsx)(n.p,{children:"Object-oriented data structure \u2013 nodes for objects/transforms."}),"\n",(0,t.jsx)(n.h3,{id:"31-scenegraphnode-base",children:"3.1 SceneGraphNode (Base)"}),"\n",(0,t.jsxs)(n.p,{children:["Abstract \u2013 override ",(0,t.jsx)(n.code,{children:"doDraw(g)"})," for custom drawing."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example (Line):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"let line = new SceneGraphNode();\nline.doDraw = function(g) {\n    g.beginPath();\n    g.moveTo(-0.5, 0);\n    g.lineTo(0.5, 0);\n    g.stroke();\n};\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"32-compoundobject-group-sub-objects",children:"3.2 CompoundObject (Group Sub-Objects)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function CompoundObject() {\n    SceneGraphNode.call(this);\n    this.subobjects = [];\n}\nCompoundObject.prototype.add = function(node) {\n    this.subobjects.push(node);\n    return this;  // Chainable\n};\nCompoundObject.prototype.doDraw = function(g) {\n    this.subobjects.forEach(sub => sub.draw(g));\n};\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Tip: Use for groups (e.g., wheel = circle + spokes)."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"33-transformedobject-apply-transforms",children:"3.3 TransformedObject (Apply Transforms)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function TransformedObject(object) {\n    SceneGraphNode.call(this);\n    this.object = object;\n    this.rotationInDegrees = 0;\n    this.scaleX = 1; this.scaleY = 1;\n    this.translateX = 0; this.translateY = 0;\n}\nTransformedObject.prototype.setRotation = function(deg) {\n    this.rotationInDegrees = deg;\n    return this;\n};\nTransformedObject.prototype.setScale = function(sx, sy) {\n    this.scaleX = sx; this.scaleY = sy;\n    return this;\n};\nTransformedObject.prototype.setTranslation = function(dx, dy) {\n    this.translateX = dx; this.translateY = dy;\n    return this;\n};\nTransformedObject.prototype.doDraw = function(g) {\n    g.save();\n    g.translate(this.translateX, this.translateY);\n    g.rotate(this.rotationInDegrees * Math.PI / 180);\n    g.scale(this.scaleX, this.scaleY);\n    this.object.draw(g);\n    g.restore();\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Chain example:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:".setScale(2,2).setRotation(45).setTranslation(100,100)"})]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Tip: Transforms auto-isolated with save/restore."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"34-building-a-scene-car-example",children:"3.4 Building a Scene (Car Example)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"let world = new CompoundObject();\n\n// Wheel\nlet wheelTemp = new CompoundObject();\nwheelTemp.add( new TransformedObject(filledCircle).setScale(2,2) );\nfor (let i = 0; i < 12; i++) {\n    wheelTemp.add( new TransformedObject(line).setRotation(i*30) );\n}\nlet wheel = new TransformedObject(wheelTemp);\n\n// Cart\nlet cartTemp = new CompoundObject();\ncartTemp.add( new TransformedObject(wheel).setScale(0.8,0.8).setTranslation(-1.65,-0.1) );\ncartTemp.add( new TransformedObject(wheel).setScale(0.8,0.8).setTranslation(1.65,-0.1) );\ncartTemp.add( new TransformedObject(filledRect).setScale(6,1.5).setTranslation(0,1) );\nlet cart = new TransformedObject(cartTemp).setScale(0.3,0.3);\n\nworld.add(cart);\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"How to Make Your Own: Define templates (CompoundObject), wrap in TransformedObject for positioning. Add to root."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"35-traversal--stack",children:"3.5 Traversal & Stack"}),"\n",(0,t.jsxs)(n.p,{children:["Push/Pop: Auto in ",(0,t.jsx)(n.code,{children:"doDraw()"})," (save/restore).",(0,t.jsx)(n.br,{}),"\n","Importance: Ensures child transforms don't affect siblings."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Tip: For complex, visualize tree \u2013 draw on paper first."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"4-animation-section-64",children:"4. Animation (Section 6.4)"}),"\n",(0,t.jsxs)(n.p,{children:["Update in ",(0,t.jsx)(n.code,{children:"updateFrame()"})," \u2013 redraw full scene."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Basic Update"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function updateFrame() {\n    frameNumber++;\n    cart.setTranslation(Math.sin(frameNumber * 0.05) * 2, 0);  // Oscillate\n    wheel.setRotation(frameNumber * 3);  // Spin\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Tips: Use ",(0,t.jsx)(n.code,{children:"%"})," for loops, ",(0,t.jsx)(n.code,{children:"Math.sin/cos"})," for smooth motion.",(0,t.jsx)(n.br,{}),"\n","Techniques: Procedural (physics-like), keyframe interpolation (lerp between poses).",(0,t.jsx)(n.br,{}),"\n","Advanced: Inverse Kinematics (IK) for limbs \u2013 calculate joint angles from end position."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example: Ferris Wheel (Ex 3 Idea)"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"let wheel = new TransformedObject(wheelTemp).setRotation(frameNumber * 0.05);  // Spin wheel\nfor (let i = 0; i < 8; i++) {\n    let seat = new TransformedObject(seatTemp)\n        .setTranslation(0, r)\n        .setRotation(-frameNumber * 0.05)  // Counter-rotate seat to stay horizontal\n        .setRotation(i * 45);  // Position on wheel\n    wheel.add(seat);\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Make Your Own: Think real-world (sailboat rocking, airplane flying). Add multiple instances (e.g., 2 carts)."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"5-exam-tips--techniques",children:"5. Exam Tips & Techniques"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Subroutine vs Scene Graph:"})," Subroutines for quick/simple; Graphs for reuse/animation (easier updates)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Save/Restore Importance:"}),' Prevents "bleed" \u2013 always bracket transforms.']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"How to Code Your Own:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Sketch hierarchy tree."}),"\n",(0,t.jsx)(n.li,{children:"Define basics (leaf nodes)."}),"\n",(0,t.jsx)(n.li,{children:"Build composites (parents call children)."}),"\n",(0,t.jsx)(n.li,{children:"Add transforms/animation last."}),"\n",(0,t.jsx)(n.li,{children:"Test: Comment out parts, draw one level at a time."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Common Errors:"})," Mismatched save/restore, wrong order (translate last), forgetting relative coords.",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Lab 2 Style Questions:"})," Build cart/windmill, animate rotation/translation, create custom scene (ferris wheel, swing)."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var s=r(6540);const t={},i=s.createContext(t);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);